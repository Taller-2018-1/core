<div *ngIf="indicator$ | async as indicator; else loading">

  <section>
    <div id="head-page-section" class="l-grey-bg head-page-section">
      <div class="container">
        <div class="row">
          <div class="col-md-8 col-sm-7">
            <div class="head-title">
              <h1> {{ indicator.name }}</h1>
              <!--h2>Tipo: {{ indicator.type }}</h2-->
            </div>
            <!-- end subsection-text -->
          </div>
          <!-- end col-md-8 -->
        </div>
        <!-- end row -->
      </div>
      <!-- end container -->
    </div>
  </section>
  <div class="container">
    <div class="heading-block">
      <h2>Detalle de Registros</h2>
    </div>
    <ng-container *ngIf="indicator.type == 0 || indicator.type == 1">
      <div class="panel panel-default" *ngFor="let registry of indicator.registries">
        <!-- Default panel contents -->
        <div class="panel-heading">{{registry.name}}</div>
        <div class="panel-body">
          <!-- Table -->
          <table class="table">
            <tr>
              <td>
                <b>Fecha</b>
              </td>
              <td>{{registry.date | date:'dd-MM-yyyy'}}</td>
            </tr>
            <tr *ngIf="registry.discriminator ==='QuantityRegistry'">
              <td>
                <b>N°</b>
              </td>
              <td>
                {{registry.quantity}}
              </td>
            </tr>
            <tr>
              <td>
                <b>Documento respaldo</b>
              </td>
              <td>
                <a (click)="gotoRegistry(registry.registryID)">Ver respaldos</a>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </ng-container>
    <button type="button" class="btn btn-primary" (click)="openModal(template)">Añadir registro</button>
    <ng-template #template>
      <div class="modal-header">
        <h4 class="modal-title pull-left">Ingrese un Nuevo Registro</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <app-registry-form [indicator]="indicator" [idIndicator]="idIndicator" [modalRef]="modalRef"></app-registry-form>
      </div>
    </ng-template>
  </div>
</div>

<br>
<ng-template #loading>
  Cargando...
</ng-template>
